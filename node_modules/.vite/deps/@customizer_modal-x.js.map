{
  "version": 3,
  "sources": ["../../@customizer/modal-x/index.js", "../../@customizer/modal-x/store/modal.js", "../../@customizer/modal-x/plugins/modal.js"],
  "sourcesContent": ["import ModalParent from \"./ModalParent.vue\";\nimport { useModal } from \"./store/modal\";\nimport modal from \"./plugins/modal\";\n/**\n * Opens a modal component.\n *\n * @param {string} modalToOpen - The identifier(name of the modal file) of the modal component to open.\n * @param {Object} [data] - Optional data to pass to the modal component.\n * @param {Function} [cb] - Optional callback function to be executed after the modal is closed.\n * @returns {void}\n */\nfunction openModal(modalToOpen, data, cb) {\n  const { openModal: OM } = useModal();\n  OM(modalToOpen, data, cb);\n}\n\n/**\n * Closes an open modal component.\n *\n * @param {*} [response] - Optional response data to send back from the modal.\n * @param {boolean} [sendResponse=true] - Optional flag to determine whether to send the response data. Defaults to true.\n * @returns {void}\n */\nfunction closeModal(response = false, sendResponse = true) {\n  const { closeModal: CM } = useModal();\n  CM(response, sendResponse);\n}\n\n/**\n * Retrieves a modal component instance by its name.\n *\n * @param {string} name - The name or identifier of the modal component to retrieve.\n * @returns {any} - The instance of the modal component identified by the name.\n */\nfunction getModal(name) {\n  const { getModal: GM } = useModal();\n  return GM(name);\n}\n\n/**\n * Loads a modal component.\n *\n * @param {Object} modal - The modal component to load. Can be a Vue instance Component.\n * @returns {void}\n */\nfunction loadModal(modal) {\n  LM(modal);\n}\n\nfunction setOptions(options = {}) {\n  const { setOptions: SO } = useModal();\n  SO(options)\n}\n\n/**\n * Provides functions and components for managing modals in your application.\n *\n * @module modals\n *\n * @exports useModal - A composable for interacting with modals.\n * @exports setOptions \n * @exports getModal - Retrieves a modal component instance by its name.\n * @exports openModal - Opens a modal component with options for data and callbacks.\n * @exports loadModal - Loads a modal component with a configuration or an instance.\n * @exports closeModal - Closes an open modal with options for sending response data.\n * @exports ModalParent - A modal wrapper serving as the container for modal components.\n */\nexport { useModal, getModal, setOptions, openModal, loadModal, closeModal, ModalParent, modal as default };", "import {\n  reactive,\n  shallowRef,\n  watch,\n  defineAsyncComponent,\n  getCurrentInstance,\n  nextTick,\n  h,\n  ref,\n} from \"vue\";\nimport ModalParent from '../ModalParent.vue'\nimport { defineStore } from \"pinia\";\nimport Spinner from \"../Spinner.vue\";\n\nexport const useModal = defineStore(\"modal\", () => {\n  let modals = reactive([]);\n  const fetchedModals = shallowRef([]);\n  const spinners = shallowRef([]);\n  const globalSpinner = shallowRef();\n  // this will be set by ModalParent Since i can get access of the opened modal name to be set for the options\n  const modalName = ref('') \n  const options = ref([]);\n \n  function setOptions(opts = {\n    closeonEsc: true,\n    closeOnOverlayClick: true\n  }) {\n    if(!modalName.value) return\n    options.value[modalName.value] = opts\n  }\n\n  function openModal(modalToOpen, data, cb) {\n    modals.forEach((modal) => {\n      modal.active = false;\n    });\n\n    try {\n      data = JSON.parse(JSON.stringify(data));\n      modals.unshift({ modalToOpen, data, cb, active: true });\n    } catch (err) {\n      modals.unshift({ modalToOpen, data, cb, active: true });\n    }\n  }\n\n  function closeModal(response, sendResponse = true) {\n    let modal = modals.shift();\n    modals.length && (modals[0].active = true);\n\n    if (![undefined, null].includes(response)) modal.cb && modal.cb(response);\n  }\n\n  function getModal(name) {\n    return modals.find((modal) => modal.modalToOpen == name);\n  }\n\n  async function loadModal(modal, name, render = true) {\n    if (\n      fetchedModals.value.find((mod) =>\n        [name, modal.__name?.match(/.*\\/(.+)\\.mdl\\.vue$/)?.[1]].includes(mod.id)\n      )\n    )\n      return;\n\n    let com;\n    if (render) {\n      com = await modal.__asyncLoader();\n    } else {\n      com = modal;\n    }\n    name ||= modal.__name?.match(/.*\\/(.+)\\.mdl\\.vue$/)?.[1]\n    fetchedModals.value = [\n      {\n        id: name || \"\",\n        modal: h(ModalParent, {\n          name\n        }, () => {\n          return h(com, {\n            data: getModal(name)?.data\n          })\n        }),\n      },\n      ...fetchedModals.value,\n    ];\n  }\n\n  async function loadSpinners(modal, name, group) {\n    if (\n      spinners.value.find((mod) => {\n        return [name, modal.__name?.match(/.*\\/(.+)\\.s\\.vue$/)?.[1]?.split('.')?.[0]].includes(\n          mod.id\n        );\n      })\n    )\n      return;\n    const com = await modal.__asyncLoader();\n    spinners.value = [\n      {\n        id: name || modal.__name?.match(/.*\\/(.+)\\.s\\.vue$/)?.[1] || \"\",\n        modal: com,\n        group\n      },\n      ...spinners.value,\n    ];\n  }\n\n  async function loadGlobalSpinner(modal, name) {\n    const com = await modal.__asyncLoader();\n    globalSpinner.value = {\n      id: name || modal.__name?.match(/.*\\/(.+)\\.g\\.vue$/)?.[1] || \"\",\n      modal: com,\n    };\n  }\n\n  function fetchModal(name) {\n    if (\n      fetchedModals.value.find(\n        (modal) => modal.id == `${name}.mdl` || modal.id == name\n      )\n    )\n      return;\n\n    const asyncModules = import.meta.glob([\n      `/**/*(.)*.amdl.vue`,\n      \"!./node_modules\",\n    ]);\n    let mods = { ...asyncModules };\n\n    let group\n    const modalPath = Object.keys(mods).find(\n      (module) => {\n        const file = module.match(/.*\\/(.+)\\.amdl\\.vue$/)?.[1].split(\".\")\n        const fileName = file?.[0] \n        if(fileName == name) {\n          group = file?.[1]\n        }\n        return fileName == name\n      }\n    );\n\n    if (!modalPath)\n      return console.log(\n        `%cno modal found with name [${name}]`,\n        \"font-size: 14px; color: red;\"\n      );\n\n    const spinnerModal = spinners.value.find((m) => m.id == name || (group && m?.group == group))?.modal;\n    let modal = defineAsyncComponent({\n      loader: () => mods[modalPath](),\n      loadingComponent: spinnerModal || globalSpinner.value?.modal || Spinner,\n      delay: 0,\n    });\n\n    loadModal(modal, name, false);\n  }\n\n  watch(modals, (modals) => {\n    if (modals?.[0]) fetchModal(modals?.[0]?.modalToOpen);\n  });\n\n  //watch(options, () => {\n  //  console.log(options.value)\n  //}, {immediate: true, deep: true})\n\n  return {\n    modals,\n    loadSpinners,\n    spinners,\n    fetchedModals,\n    openModal,\n    closeModal,\n    getModal,\n    loadModal,\n    loadGlobalSpinner,\n    setOptions,\n    options,\n    modalName\n  };\n});\n", "import Modal from '../Modal.vue'\nimport { createVNode, render } from 'vue'\nexport default {\n  install: (app) => {\n    const container = document.createElement(\"div\")\n    container.style.overflow = 'auto'\n    document.body.appendChild(container)\n\n    const vnode = createVNode(Modal)\n    vnode.appContext = app._context\n    render(vnode, container)  \n  }\n}"],
  "mappings": "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",
  "names": ["ModalParent", "setOptions", "openModal", "closeModal", "getModal", "loadModal", "render", "_a", "_b", "modal", "modals"]
}
