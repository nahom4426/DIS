{
  "version": 3,
  "sources": ["../../@customizer/modal-x/index.js", "../../@customizer/modal-x/store/modal.js", "../../@customizer/modal-x/plugins/modal.js"],
  "sourcesContent": ["import ModalParent from \"./ModalParent.vue\";\r\nimport { useModal } from \"./store/modal\";\r\nimport modal from \"./plugins/modal\";\r\n/**\r\n * Opens a modal component.\r\n *\r\n * @param {string} modalToOpen - The identifier(name of the modal file) of the modal component to open.\r\n * @param {Object} [data] - Optional data to pass to the modal component.\r\n * @param {Function} [cb] - Optional callback function to be executed after the modal is closed.\r\n * @returns {void}\r\n */\r\nfunction openModal(modalToOpen, data, cb) {\r\n  const { openModal: OM } = useModal();\r\n  OM(modalToOpen, data, cb);\r\n}\r\n\r\n/**\r\n * Closes an open modal component.\r\n *\r\n * @param {*} [response] - Optional response data to send back from the modal.\r\n * @param {boolean} [sendResponse=true] - Optional flag to determine whether to send the response data. Defaults to true.\r\n * @returns {void}\r\n */\r\nfunction closeModal(response = false, sendResponse = true) {\r\n  const { closeModal: CM } = useModal();\r\n  CM(response, sendResponse);\r\n}\r\n\r\n/**\r\n * Retrieves a modal component instance by its name.\r\n *\r\n * @param {string} name - The name or identifier of the modal component to retrieve.\r\n * @returns {any} - The instance of the modal component identified by the name.\r\n */\r\nfunction getModal(name) {\r\n  const { getModal: GM } = useModal();\r\n  return GM(name);\r\n}\r\n\r\n/**\r\n * Loads a modal component.\r\n *\r\n * @param {Object} modal - The modal component to load. Can be a Vue instance Component.\r\n * @returns {void}\r\n */\r\nfunction loadModal(modal) {\r\n  LM(modal);\r\n}\r\n\r\nfunction setOptions(options = {}) {\r\n  const { setOptions: SO } = useModal();\r\n  SO(options)\r\n}\r\n\r\n/**\r\n * Provides functions and components for managing modals in your application.\r\n *\r\n * @module modals\r\n *\r\n * @exports useModal - A composable for interacting with modals.\r\n * @exports setOptions \r\n * @exports getModal - Retrieves a modal component instance by its name.\r\n * @exports openModal - Opens a modal component with options for data and callbacks.\r\n * @exports loadModal - Loads a modal component with a configuration or an instance.\r\n * @exports closeModal - Closes an open modal with options for sending response data.\r\n * @exports ModalParent - A modal wrapper serving as the container for modal components.\r\n */\r\nexport { useModal, getModal, setOptions, openModal, loadModal, closeModal, ModalParent, modal as default };", "import {\r\n  reactive,\r\n  shallowRef,\r\n  watch,\r\n  defineAsyncComponent,\r\n  getCurrentInstance,\r\n  nextTick,\r\n  h,\r\n  ref,\r\n} from \"vue\";\r\nimport ModalParent from '../ModalParent.vue'\r\nimport { defineStore } from \"pinia\";\r\nimport Spinner from \"../Spinner.vue\";\r\n\r\nexport const useModal = defineStore(\"modal\", () => {\r\n  let modals = reactive([]);\r\n  const fetchedModals = shallowRef([]);\r\n  const spinners = shallowRef([]);\r\n  const globalSpinner = shallowRef();\r\n  // this will be set by ModalParent Since i can get access of the opened modal name to be set for the options\r\n  const modalName = ref('') \r\n  const options = ref([]);\r\n \r\n  function setOptions(opts = {\r\n    closeonEsc: true,\r\n    closeOnOverlayClick: true\r\n  }) {\r\n    if(!modalName.value) return\r\n    options.value[modalName.value] = opts\r\n  }\r\n\r\n  function openModal(modalToOpen, data, cb) {\r\n    modals.forEach((modal) => {\r\n      modal.active = false;\r\n    });\r\n\r\n    try {\r\n      data = JSON.parse(JSON.stringify(data));\r\n      modals.unshift({ modalToOpen, data, cb, active: true });\r\n    } catch (err) {\r\n      modals.unshift({ modalToOpen, data, cb, active: true });\r\n    }\r\n  }\r\n\r\n  function closeModal(response, sendResponse = true) {\r\n    let modal = modals.shift();\r\n    modals.length && (modals[0].active = true);\r\n\r\n    if (![undefined, null].includes(response)) modal.cb && modal.cb(response);\r\n  }\r\n\r\n  function getModal(name) {\r\n    return modals.find((modal) => modal.modalToOpen == name);\r\n  }\r\n\r\n  async function loadModal(modal, name, render = true) {\r\n    if (\r\n      fetchedModals.value.find((mod) =>\r\n        [name, modal.__name?.match(/.*\\/(.+)\\.mdl\\.vue$/)?.[1]].includes(mod.id)\r\n      )\r\n    )\r\n      return;\r\n\r\n    let com;\r\n    if (render) {\r\n      com = await modal.__asyncLoader();\r\n    } else {\r\n      com = modal;\r\n    }\r\n    name ||= modal.__name?.match(/.*\\/(.+)\\.mdl\\.vue$/)?.[1]\r\n    fetchedModals.value = [\r\n      {\r\n        id: name || \"\",\r\n        modal: h(ModalParent, {\r\n          name\r\n        }, () => {\r\n          return h(com, {\r\n            data: getModal(name)?.data\r\n          })\r\n        }),\r\n      },\r\n      ...fetchedModals.value,\r\n    ];\r\n  }\r\n\r\n  async function loadSpinners(modal, name, group) {\r\n    if (\r\n      spinners.value.find((mod) => {\r\n        return [name, modal.__name?.match(/.*\\/(.+)\\.s\\.vue$/)?.[1]?.split('.')?.[0]].includes(\r\n          mod.id\r\n        );\r\n      })\r\n    )\r\n      return;\r\n    const com = await modal.__asyncLoader();\r\n    spinners.value = [\r\n      {\r\n        id: name || modal.__name?.match(/.*\\/(.+)\\.s\\.vue$/)?.[1] || \"\",\r\n        modal: com,\r\n        group\r\n      },\r\n      ...spinners.value,\r\n    ];\r\n  }\r\n\r\n  async function loadGlobalSpinner(modal, name) {\r\n    const com = await modal.__asyncLoader();\r\n    globalSpinner.value = {\r\n      id: name || modal.__name?.match(/.*\\/(.+)\\.g\\.vue$/)?.[1] || \"\",\r\n      modal: com,\r\n    };\r\n  }\r\n\r\n  function fetchModal(name) {\r\n    if (\r\n      fetchedModals.value.find(\r\n        (modal) => modal.id == `${name}.mdl` || modal.id == name\r\n      )\r\n    )\r\n      return;\r\n\r\n    const asyncModules = import.meta.glob([\r\n      `/**/*(.)*.amdl.vue`,\r\n      \"!./node_modules\",\r\n    ]);\r\n    let mods = { ...asyncModules };\r\n\r\n    let group\r\n    const modalPath = Object.keys(mods).find(\r\n      (module) => {\r\n        const file = module.match(/.*\\/(.+)\\.amdl\\.vue$/)?.[1].split(\".\")\r\n        const fileName = file?.[0] \r\n        if(fileName == name) {\r\n          group = file?.[1]\r\n        }\r\n        return fileName == name\r\n      }\r\n    );\r\n\r\n    if (!modalPath)\r\n      return console.log(\r\n        `%cno modal found with name [${name}]`,\r\n        \"font-size: 14px; color: red;\"\r\n      );\r\n\r\n    const spinnerModal = spinners.value.find((m) => m.id == name || (group && m?.group == group))?.modal;\r\n    let modal = defineAsyncComponent({\r\n      loader: () => mods[modalPath](),\r\n      loadingComponent: spinnerModal || globalSpinner.value?.modal || Spinner,\r\n      delay: 0,\r\n    });\r\n\r\n    loadModal(modal, name, false);\r\n  }\r\n\r\n  watch(modals, (modals) => {\r\n    if (modals?.[0]) fetchModal(modals?.[0]?.modalToOpen);\r\n  });\r\n\r\n  //watch(options, () => {\r\n  //  console.log(options.value)\r\n  //}, {immediate: true, deep: true})\r\n\r\n  return {\r\n    modals,\r\n    loadSpinners,\r\n    spinners,\r\n    fetchedModals,\r\n    openModal,\r\n    closeModal,\r\n    getModal,\r\n    loadModal,\r\n    loadGlobalSpinner,\r\n    setOptions,\r\n    options,\r\n    modalName\r\n  };\r\n});\r\n", "import Modal from '../Modal.vue'\r\nimport { createVNode, render } from 'vue'\r\nexport default {\r\n  install: (app) => {\r\n    const container = document.createElement(\"div\")\r\n    container.style.overflow = 'auto'\r\n    document.body.appendChild(container)\r\n\r\n    const vnode = createVNode(Modal)\r\n    vnode.appContext = app._context\r\n    render(vnode, container)  \r\n  }\r\n}"],
  "mappings": "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",
  "names": ["ModalParent", "setOptions", "openModal", "closeModal", "getModal", "loadModal", "render", "_a", "_b", "modal", "modals"]
}
