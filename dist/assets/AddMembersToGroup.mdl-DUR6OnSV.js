import{h as G,aa as U,r as c,m as I,o as z,w as u,d as i,N as B,aS as P,a as d,E as V,t as $,G as D,z as F,B as f,s as _,u as g,b,e as x,M as j,T as S,aT as E}from"./index-BA4ml571.js";const q={class:"flex flex-col gap-4 bg-white p-3"},R={class:"flex w-full justify-between items-center"},H={class:"text-base-clr"},J=["checked","onChange"],K=["checked","onChange"],L={class:"flex justify-end gap-4"},Q={__name:"AddMembersToGroup.mdl",props:{data:String},setup(N){var v,m;const h=G(),k=N,y=U(),M=c(((m=(v=y.auth)==null?void 0:v.user)==null?void 0:m.payerUuid)||""),p=c(""),o=c(!1),e=c([]);function C(a,s=[]){a?(e.value=[],s.forEach(l=>{l!=null&&l.insuredUuid&&e.value.push(l.insuredUuid)}),o.value=!0):(o.value=!1,e.value=[])}function T(a,s=[]){e.value.findIndex(r=>r==a)>-1?(e.value=e.value.filter(r=>r!=a),o.value=!1):(e.value.push(a),e.value.length===s.length&&(o.value=!0))}function A(){if(e.value.length===0){S(!1,"","Please Select Member");return}h.send(()=>E(k.data,{insuredUuids:e.value,insured:!0}),a=>{a.success&&b(),S(a.success,"Members Added To GroupSuccessfully",a.error)})}return(a,s)=>(z(),I(j,null,{default:u(()=>[i(B,{class:"",size:"lg",title:"Add Members To Group",subtitle:"Insured Mmembers"},{default:u(()=>[i(P,{institutionId:M.value,search:p.value},{default:u(({insuredMembers:l,pending:r})=>[d("div",q,[d("div",R,[d("h1",H," Selected Members ("+$(e.value.length)+") ",1),V(d("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>p.value=t),placeholder:"Search and Select Services",class:"p-4 w-[36rem] bg-base-clr3 rounded-md",type:"text"},null,512),[[D,p.value]])]),i(F,{firstCol:!0,"show-pagination":!1,pending:r,rows:l,headers:{head:["Full Name","ID Number","Phone","Position","Status","Actions"],row:["fullName","idNumber","phone","position","status"]},cells:{fullName:(t,n)=>(n==null?void 0:n.firstName)+" "+(n==null?void 0:n.fatherName)}},{headerFirst:u(({row:t})=>[i(f,null,{default:u(()=>[d("input",{checked:o.value,onChange:n=>C(n.target.checked,l),class:"size-4",type:"checkbox"},null,40,J)]),_:2},1024)]),select:u(({row:t})=>[i(f,null,{default:u(()=>[d("input",{type:"checkbox",checked:e.value.includes(t==null?void 0:t.insuredUuid),onChange:n=>T(t==null?void 0:t.insuredUuid,l),class:"size-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,40,K)]),_:2},1024)]),_:2},1032,["pending","rows","cells"]),d("div",L,[i(f,{onClick:s[1]||(s[1]=_(t=>g(b)(),["prevent"])),class:"border border-base-clr"},{default:u(()=>s[2]||(s[2]=[x(" Cancel ")])),_:1,__:[2]}),i(f,{pending:g(h).pending.value,size:"md",class:"!text-white",type:"primary",onClick:_(A,["prevent"])},{default:u(()=>s[3]||(s[3]=[x(" Create Group ")])),_:2,__:[3]},1032,["pending"])])])]),_:1},8,["institutionId","search"])]),_:1})]),_:1}))}};export{Q as default};
