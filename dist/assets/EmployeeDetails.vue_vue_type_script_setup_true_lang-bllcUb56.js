import{_ as q,r as b,k as w,a8 as $,c as l,o as r,a as e,t as i,D as I,E as U,n as x,G as F,v as V,d as P,S as Q,F as T,C as S,Z as G,e as H}from"./index-BA4ml571.js";const O={class:"bg-[#F6F7FA] p-4"},z={class:"debug-section",style:{display:"none"}},M={class:"flex items-center mb-6"},K={class:"flex border border-gray-300 rounded w-fit"},Z={class:"flex-1 w-full ml-4"},J={class:"relative"},W=["placeholder"],X={key:0,class:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border border-gray-300 p-4 text-center"},Y={key:1,class:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border border-gray-300 max-h-60 overflow-auto"},ee=["onClick"],te={class:"font-medium"},se={class:"text-sm text-gray-500"},ae={class:"text-sm font-medium"},ie={key:2,class:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border border-gray-300 p-4 text-center text-sm text-gray-500"},de={class:"overflow-x-auto bg-white p-3"},oe={class:"text-xs text-[#75778B] mb-4"},ne={class:"min-w-full divide-y divide-gray-200"},le={class:"border-b px-2"},re={key:0,class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ue={key:1,class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ce={key:2,class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},pe={key:3,class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},me={class:"bg-white divide-y divide-gray-200"},ve={class:"px-1 py-4 whitespace-nowrap text-sm text-gray-500"},ge={class:"px-3 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},xe={class:"px-3 py-4 whitespace-nowrap text-sm text-gray-500"},ye={class:"px-3 py-4 whitespace-nowrap text-sm text-gray-500"},fe={class:"bg-[#DFF1F1] px-2 py-1 font-bold text-primary"},he={key:0,class:"px-3 py-4 whitespace-nowrap"},be=["value","onInput"],we={class:"px-3 py-4 whitespace-nowrap text-sm text-gray-500"},_e={class:"px-3 py-4 whitespace-nowrap"},ke=["value","onInput"],Ce={class:"px-3 py-3 whitespace-nowrap"},Ue=["value"],Fe={class:"px-3 py-4 whitespace-nowrap text-sm font-medium"},Te=["onClick"],De={key:0},Ne=["colspan"],$e={key:0,class:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},Ie={__name:"selectServices",props:{activeTab:{type:String,required:!0,validator:d=>["services","drugs"].includes(d)},searchQuery:String,pending:Boolean,addedItems:{type:Array,default:()=>[]},primaryDiagnosis:String,secondaryDiagnosis:String,remarks:{type:Object,default:()=>({})},insuredUuid:String,contractHeaderUuid:String},emits:["update:activeTab","update:searchQuery","add-item","remove-item","update-item","search-items","update:primaryDiagnosis","update:secondaryDiagnosis","update:remarks"],setup(d,{expose:c,emit:n}){const o=d,v=n,p=b(o.searchQuery),_=b(o.primaryDiagnosis),k=b(o.secondaryDiagnosis),f=b(o.remarks||{}),m=b([]);function D(a){v("update:activeTab",a),p.value="",m.value=[]}w(p,a=>{v("update:searchQuery",a),a.length>0&&o.insuredUuid&&o.contractHeaderUuid?v("search-items",{type:o.activeTab,query:a,insuredUuid:o.insuredUuid,contractHeaderUuid:o.contractHeaderUuid}):m.value=[]}),w(_,a=>{v("update:primaryDiagnosis",a)}),w(k,a=>{v("update:secondaryDiagnosis",a)}),w(m,a=>{a.forEach(t=>{o.activeTab==="services"&&!t.serviceName&&console.warn("Service item missing name:",t),o.activeTab==="drugs"&&!t.drugName&&console.warn("Drug item missing name:",t)})},{deep:!0});function A(a){if(!a){m.value=[];return}m.value=a.map(t=>{const s=t.serviceUuid!==null&&t.serviceUuid!==void 0&&t.serviceName!=="N/A",u=t.drugUuid!==null&&t.drugUuid!==void 0&&t.drugName!=="N/A",g={id:t.contractDetailUuid,contractDetailUuid:t.contractDetailUuid,price:t.negotiatedPrice||0,paymentAmount:`ETB ${(t.negotiatedPrice||0).toFixed(2)}`,status:t.status||"UNKNOWN",itemType:s?"SERVICE":"DRUG"};return s?Object.assign(g,{serviceUuid:t.serviceUuid,serviceName:t.serviceName,serviceCode:t.serviceCode,drugUuid:null,drugName:null,drugCode:null}):u&&Object.assign(g,{drugUuid:t.drugUuid,drugName:t.drugName,drugCode:t.drugCode||"N/A",serviceUuid:null,serviceName:null,serviceCode:null}),g}).filter(t=>o.activeTab==="services"?t.itemType==="SERVICE":o.activeTab==="drugs"?t.itemType==="DRUG":!1),console.log("Mapped and filtered items:",m.value)}const N=a=>o.addedItems.some(t=>t.contractDetailUuid===a),h=$(()=>{if(!p.value||m.value.length===0)return[];const a=p.value.toLowerCase();return m.value.filter(t=>{const s=o.activeTab==="services"?t.serviceName:t.drugName,u=o.activeTab==="services"?t.serviceCode:t.drugCode;return(s.toLowerCase().includes(a)||u.toLowerCase().includes(a))&&!N(t.id)})});function B(a){if(N(a.id))return;const t={...a,itemType:o.activeTab==="services"?"SERVICE":"DRUG",contractDetailUuid:a.contractDetailUuid,...o.activeTab==="drugs"?{quantity:1,totalCost:a.price*1,route:"oral",frequency:"daily",dose:"1",duration:"7 days"}:{remark:f.value[a.id]||"",quantity:1}};v("add-item",t),p.value=""}function E(a,t,s){f.value={...f.value,[t]:s},v("update:remarks",f.value)}function R(a){v("remove-item",a)}function L(a,t,s){const u={...o.addedItems[a]},g={[t]:s};if("price"in u){const j=Number(s)||0;g.totalCost=u.price*j}const y={...u,...g};v("update-item",{index:a,item:y})}const C=$(()=>o.addedItems.filter(a=>o.activeTab==="services"?a.itemType==="SERVICE":a.itemType==="DRUG"));return c({setSearchResults:A}),(a,t)=>(r(),l("div",O,[e("div",z,[t[6]||(t[6]=e("h3",null,"Debug Info:",-1)),e("p",null,"Search Query: "+i(p.value),1),e("p",null,"Available Items Count: "+i(m.value.length),1),e("p",null,"Filtered Items Count: "+i(h.value.length),1),e("pre",null,"Available Items: "+i(JSON.stringify(m.value,null,2)),1),e("pre",null,"Filtered Items: "+i(JSON.stringify(h.value,null,2)),1)]),e("div",M,[e("div",K,[e("button",{type:"button",onClick:t[0]||(t[0]=s=>D("services")),class:I(["px-6 py-4 transition-colors duration-300",d.activeTab==="services"?"bg-[#75778B] text-white rounded-l font-medium":"bg-white text-[#75778B] hover:bg-gray-100"])}," Services ",2),e("button",{type:"button",onClick:t[1]||(t[1]=s=>D("drugs")),class:I(["px-6 py-4 transition-colors duration-300",d.activeTab==="drugs"?"bg-[#75778B] text-white rounded-r font-medium":"bg-white text-[#75778B] hover:bg-gray-100"])}," Drugs ",2)]),e("div",Z,[e("div",J,[U(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>p.value=s),placeholder:`Search ${d.activeTab}...`,class:"w-full p-4 rounded-md focus:ring-teal-500 focus:border-teal-500",onKeyup:t[3]||(t[3]=V(s=>a.$emit("search-items",{type:d.activeTab,query:p.value,insuredUuid:d.insuredUuid,contractHeaderUuid:d.contractHeaderUuid}),["enter"]))},null,40,W),[[F,p.value]]),p.value&&d.pending?(r(),l("div",X,[P(Q,{class:"h-5 w-5 text-teal-600 mx-auto"}),t[7]||(t[7]=e("p",{class:"text-sm text-gray-500 mt-2"},"Searching...",-1))])):p.value&&h.value.length>0?(r(),l("div",Y,[e("ul",null,[(r(!0),l(T,null,S(h.value,s=>(r(),l("li",{key:s.id,onClick:u=>B(s),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer flex justify-between items-center"},[e("div",null,[e("div",te,i(s.serviceName||s.drugName),1),e("div",se,i(s.serviceCode||s.drugCode),1)]),e("span",ae,i(s.paymentAmount),1)],8,ee))),128))])])):p.value&&!d.pending&&h.value.length===0?(r(),l("div",ie," No matching "+i(d.activeTab)+" found ",1)):x("",!0)])])]),e("div",de,[e("h2",oe,"Added "+i(d.activeTab),1),e("table",ne,[e("thead",le,[e("tr",null,[t[8]||(t[8]=e("th",{class:"px-1 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"#",-1)),t[9]||(t[9]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Code",-1)),t[10]||(t[10]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Name",-1)),t[11]||(t[11]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Price",-1)),d.activeTab==="services"?(r(),l("th",re,"Remark")):x("",!0),d.activeTab==="drugs"?(r(),l("th",ue,"Dosage")):x("",!0),d.activeTab==="drugs"?(r(),l("th",ce,"Quantity")):x("",!0),d.activeTab==="drugs"?(r(),l("th",pe,"Total Cost")):x("",!0),t[12]||(t[12]=e("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Action",-1))])]),e("tbody",me,[(r(!0),l(T,null,S(C.value,(s,u)=>{var g;return r(),l("tr",{key:s.contractDetailUuid},[e("td",ve,i(u+1),1),e("td",ge,i(s.serviceCode||s.drugCode),1),e("td",xe,i(s.serviceName||s.drugName),1),e("td",ye,[e("div",fe,i(s.paymentAmount),1)]),d.activeTab==="services"?(r(),l("td",he,[e("input",{type:"text",value:f.value[s.contractDetailUuid],onInput:y=>E(u,s.contractDetailUuid,y.target.value),class:"w-full px-3 py-3 bg-[#F6F7FA]",placeholder:"Service remark"},null,40,be)])):x("",!0),d.activeTab==="drugs"?(r(),l(T,{key:1},[e("td",we,i(s.dose),1),e("td",_e,[e("input",{type:"number",min:"1",value:s.quantity,onInput:y=>L(u,"quantity",y.target.value),class:"w-20 px-3 py-3 bg-[#F6F7FA]"},null,40,ke)]),e("td",Ce,[e("input",{type:"text",value:((g=s.totalCost)==null?void 0:g.toFixed(2))||"0.00",readonly:"",class:"w-40 px-3 py-3 bg-[#F6F7FA]",placeholder:"Total Cost"},null,8,Ue)])],64)):x("",!0),e("td",Fe,[e("button",{type:"button",onClick:y=>R(u),class:"bg-[#F14545] text-white px-3 rounded-md py-1 hover:bg-red-900"}," Remove ",8,Te)])])}),128)),C.value.length===0?(r(),l("tr",De,[e("td",{colspan:d.activeTab==="services"?5:8,class:"px-3 py-4 text-center text-sm text-gray-500"}," No "+i(d.activeTab)+" added yet ",9,Ne)])):x("",!0)])]),d.activeTab==="services"&&C.value.length>0?(r(),l("div",$e,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Primary Diagnosis",-1)),U(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>_.value=s),class:"w-full px-3 py-3 bg-[#F6F7FA]",placeholder:"Enter primary diagnosis"},null,512),[[F,_.value]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Secondary Diagnosis",-1)),U(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>k.value=s),class:"w-full px-3 py-3 bg-[#F6F7FA]",placeholder:"Enter secondary diagnosis"},null,512),[[F,k.value]])])])):x("",!0)])]))}},it=q(Ie,[["__scopeId","data-v-98de4f49"]]),Se={class:"bg-[#F6F7FA] p-4 flex"},Ae={class:"flex flex-col md:flex-row gap-4 p-4 bg-[#F6F7FA] rounded-xl shadow-sm w-full"},Be={class:"w-[10rem] h-[10rem] flex items-center justify-center rounded-lg overflow-hidden"},Ee=["src"],Re={class:"bg-white rounded-lg p-4 w-full md:w-[20rem] space-y-2"},Le={class:"flex"},je={class:"text-sm font-medium text-[#373946]"},qe={class:"flex"},Ve={class:"text-sm font-medium text-[#373946]"},Pe={class:"flex"},Qe={class:"text-sm font-medium text-[#373946]"},Ge={class:"flex"},He={class:"text-sm font-medium text-[#373946]"},Oe={class:"bg-white rounded-lg p-4 w-full md:w-[20rem] space-y-2"},ze={class:"flex"},Me={class:"text-sm font-medium text-[#373946]"},Ke={class:"flex"},Ze={class:"text-sm font-medium text-[#373946]"},Je={class:"flex"},We={class:"text-sm font-medium text-[#373946]"},Xe={class:"bg-white rounded-lg p-4 w-full md:w-[20rem] space-y-2"},Ye={class:"flex p-2 gap-2 bg-[#DFF1F1]"},et={class:"text-xs font-medium bg-primary py-2 rounded-lg px-3 flex items-center gap-2 text-white"},tt={class:"flex-1 flex items-center px-2 justify-between"},st={class:"text-sm font-medium items-center text-center justify-center"},dt=G({__name:"EmployeeDetails",props:{employee:{}},setup(d){return(c,n)=>(r(),l("div",Se,[e("div",Ae,[e("div",Be,[e("img",{src:c.employee.profilePicture||"https://randomuser.me/api/portraits/men/75.jpg",alt:"Profile",class:"w-full h-full object-cover"},null,8,Ee)]),e("div",Re,[e("div",Le,[n[0]||(n[0]=e("span",{class:"text-xs text-[#75778B] w-28"},"Full Name",-1)),e("span",je,i(c.employee.fullName),1)]),e("div",qe,[n[1]||(n[1]=e("span",{class:"text-xs text-[#75778B] w-28"},"Role",-1)),e("span",Ve,i(c.employee.role),1)]),e("div",Pe,[n[2]||(n[2]=e("span",{class:"text-xs text-[#75778B] w-28"},"Phone",-1)),e("span",Qe,i(c.employee.phone),1)]),e("div",Ge,[n[3]||(n[3]=e("span",{class:"text-xs text-[#75778B] w-28"},"Email",-1)),e("span",He,i(c.employee.email),1)])]),e("div",Oe,[e("div",ze,[n[4]||(n[4]=e("span",{class:"text-xs text-[#75778B] w-28"},"Employee ID",-1)),e("span",Me,i(c.employee.employeeId),1)]),e("div",Ke,[n[5]||(n[5]=e("span",{class:"text-xs text-[#75778B] w-28"},"Address",-1)),e("span",Ze,i(c.employee.address),1)]),e("div",Je,[n[6]||(n[6]=e("span",{class:"text-xs text-[#75778B] w-28"},"Gender",-1)),e("span",We,i(c.employee.gender),1)])]),e("div",Xe,[e("div",Ye,[e("span",et,[n[7]||(n[7]=e("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 6C0 2.68629 2.68629 0 6 0C9.31371 0 12 2.68629 12 6C12 9.31371 9.31371 12 6 12C2.68629 12 0 9.31371 0 6ZM5.40001 8.34854L9.27427 4.47427L8.42575 3.62574L5.40001 6.65148L3.72427 4.97574L2.87574 5.82427L5.40001 8.34854Z",fill:"white"})],-1)),H(" "+i(c.employee.status),1)]),e("div",tt,[e("span",st,i(c.employee.employeeId),1)])]),n[8]||(n[8]=e("div",{class:"flex"},[e("span",{class:"bg-[#DFF1F1] text-[#02676B] px-6 py-3.5 rounded-md mt-2 text-sm font-medium"}," C-Level ")],-1))])])]))}});export{dt as _,it as s};
