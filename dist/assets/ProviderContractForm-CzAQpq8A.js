import{_ as T,r as i,j as I,m as j,o as v,w as E,a as t,e as d,c as V,n as F,F as A,d as s,Y as k,X as w,ab as O,Q as S,B as R,ad as M,s as W,P as z}from"./index-BA4ml571.js";const G={class:"p-4 space-y-6"},H={class:"space-y-2"},Q={class:"block text-sm font-medium text-[#75778B]"},X={key:0,class:"text-red-500"},Y={key:0,class:"mb-4 relative w-full"},J=["src"],K={class:"flex items-end justify-center mt-2"},Z={class:"flex items-center ml-4 rounded-md px-3 py-1"},ee=["required"],te={class:"space-y-2"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},le={class:"space-y-2"},oe={class:"space-y-2"},ie={class:"flex w-full gap-2"},se={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},re={class:"space-y-2"},ne={class:"space-y-2"},de={class:"space-y-2"},ue={class:"space-y-2"},me={class:"pt-4 px-6 border-t border-[#DFDEF2] flex justify-end space-x-4"},ce={__name:"ProviderContractForm",props:{initialData:{type:Object,default:()=>({})},isEdit:{type:Boolean,default:!1},pending:{type:Boolean,default:!1},onSubmit:{type:Function,required:!0},onCancel:{type:Function,required:!0}},setup(u){const l=u,m=i<File|null>null,f=i(""),g=i(""),c=i(""),p=i("+251"),b=i(""),x=i(""),y=i(""),D=i(""),r=i("");I(()=>{if(l.initialData&&Object.keys(l.initialData).length>0){f.value=l.initialData.providerName||"",g.value=l.initialData.category||"",b.value=l.initialData.address1||"",x.value=l.initialData.tinNumber||"",y.value=l.initialData.email||"",D.value=l.initialData.description||l.initialData.memo||"";const o=l.initialData.telephone||"",a=["+251"].find(n=>o.startsWith(n));if(a?(p.value=a,c.value=o.slice(a.length)):(p.value="+251",c.value=o),l.initialData.logoBase64)r.value=l.initialData.logoBase64;else if(l.initialData.logoUrl)r.value=l.initialData.logoUrl;else if(l.initialData.logoPath){const n="http://localhost:8080/api";r.value=`${n}/provider/logo/${l.initialData.logoPath}`}}});function P(o){var n;const a=(n=o.target.files)==null?void 0:n[0];if(a){m.value=a;const h=new FileReader;h.onload=B=>{var q;r.value=(q=B.target)==null?void 0:q.result},h.readAsDataURL(a)}}function C(){document.getElementById("file-upload").click()}function _(o){o.preventDefault(),o.currentTarget.classList.add("border-primary")}function N(o){o.preventDefault(),o.currentTarget.classList.remove("border-primary")}function U(o){var e;if(o.preventDefault(),o.currentTarget.classList.remove("border-primary"),(e=o.dataTransfer)!=null&&e.files.length){const a=o.dataTransfer.files[0];m.value=a;const n=new FileReader;n.onload=h=>{var B;r.value=(B=h.target)==null?void 0:B.result},n.readAsDataURL(a)}}function L(){if(!l.isEdit&&!m.value){console.error("Provider logo is required for new providers");return}const o={providerName:f.value,category:g.value,telephone:`${p.value}${c.value}`,address:b.value,tinNumber:x.value,email:y.value,description:D.value,country:"Ethiopia"};m.value&&(o.providerLogo=m.value),r.value&&!m.value&&l.isEdit&&(l.initialData.logoBase64?o.logoBase64=l.initialData.logoBase64:l.initialData.logoPath&&(o.logoPath=l.initialData.logoPath)),l.onSubmit(o)}const $=["Insurance Company","Government Agency","Healthcare Provider","Corporate Entity","Non-Profit Organization"];return(o,e)=>(v(),j(z,{ref:"formEl",inner:!1,id:"provider-form",class:"bg-white",onSubmit:W(L,["prevent"])},{default:E(({})=>[t("div",G,[t("div",H,[t("label",Q,[e[8]||(e[8]=d(" Provider logo ")),u.isEdit?F("",!0):(v(),V("span",X,"*"))]),t("div",{onDragover:_,onDragleave:N,onDrop:U,class:"border-[1px] bg-[#F6F7FA] border-dashed border-[#75778B] rounded-md items-center justify-center p-6 flex flex-col cursor-pointer hover:border-primary"},[r.value?(v(),V("div",Y,[t("img",{src:r.value,alt:"Logo preview",class:"h-20 w-auto object-contain mx-auto"},null,8,J)])):F("",!0),t("div",K,[t("div",Z,[u.isEdit?(v(),V("button",{key:0,type:"button",onClick:C,class:"text-xs font-medium text-white bg-[#02676B] ml-2 py-2 px-3 hover:underline"}," Change Logo ")):F("",!0)])]),r.value?F("",!0):(v(),V(A,{key:1},[e[9]||(e[9]=t("p",{class:"text-sm text-[#75778B]"},"Drag your logo file to start uploading",-1)),e[10]||(e[10]=t("p",{class:"text-sm text-[#75778B] mt-1"},"or",-1)),t("button",{type:"button",onClick:C,class:"mt-2 px-4 py-2 text-sm font-medium text-[#75778B] border border-[#75778B] rounded-md hover:bg-gray-50"}," Browse images ")],64)),t("input",{id:"file-upload",type:"file",accept:"image/*",class:"hidden",onChange:P,required:!u.isEdit},null,40,ee)],32)]),t("div",te,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-[#75778B]"},[d(" Provider Name "),t("span",{class:"text-red-500"},"*")],-1)),s(k,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),name:"providerName",validation:"required",attributes:{placeholder:"Enter provider's legal name",required:!0}},null,8,["modelValue"])]),t("div",ae,[t("div",le,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-[#75778B]"},[d(" Category "),t("span",{class:"text-red-500"},"*")],-1)),s(w,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=a=>g.value=a),name:"category",validation:"required",options:$,attributes:{placeholder:"Select company category",required:!0}},null,8,["modelValue"])]),t("div",oe,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-[#75778B]"},[d(" Phone Number "),t("span",{class:"text-red-500"},"*")],-1)),t("div",ie,[s(w,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=a=>p.value=a),name:"countryCode",options:["+251"],attributes:{required:!0}},null,8,["modelValue"]),s(k,{modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=a=>c.value=a),name:"phoneNumber",validation:"required",attributes:{placeholder:"Enter phone number",class:"px-8 my-2 bg-[#F9F9FD]",required:!0}},null,8,["modelValue"])])])]),t("div",se,[t("div",re,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-[#75778B]"},[d(" Address "),t("span",{class:"text-red-500"},"*")],-1)),s(k,{modelValue:b.value,"onUpdate:modelValue":e[4]||(e[4]=a=>b.value=a),name:"address",validation:"required",attributes:{placeholder:"Enter company address",required:!0}},null,8,["modelValue"])]),t("div",ne,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-[#75778B]"},[d(" TIN "),t("span",{class:"text-red-500"},"*")],-1)),s(k,{modelValue:x.value,"onUpdate:modelValue":e[5]||(e[5]=a=>x.value=a),name:"tin",validation:"required",attributes:{placeholder:"Enter TIN",required:!0}},null,8,["modelValue"])])]),t("div",de,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-[#75778B]"},[d(" Admin User "),t("span",{class:"text-red-500"},"*")],-1)),s(O,{modelValue:y.value,"onUpdate:modelValue":e[6]||(e[6]=a=>y.value=a),name:"email",validation:"required|email",attributes:{placeholder:"Email of the admin user",required:!0}},null,8,["modelValue"])]),t("div",ue,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-[#75778B]"}," Description ",-1)),s(S,{modelValue:D.value,"onUpdate:modelValue":e[7]||(e[7]=a=>D.value=a),name:"memo",attributes:{placeholder:"Write any description",rows:3}},null,8,["modelValue"])])]),t("div",me,[s(R,{type:"button",onClick:l.onCancel,class:"text-[#75778B] px-6 py-4 border-[1px] border-[#75778B] rounded-lg hover:bg-gray-50",disabled:u.pending},{default:E(()=>e[18]||(e[18]=[d(" Cancel ")])),_:1,__:[18]},8,["onClick","disabled"]),s(M,{pending:u.pending,"btn-text":u.isEdit?"Update Provider":"Add Provider",class:"bg-[#02676B] hover:bg-[#014F4F] text-white px-6 py-3 border-[#02676B] hover:border-[#014F4F]"},null,8,["pending","btn-text"])])]),_:1},512))}},ve=T(ce,[["__scopeId","data-v-c32080c8"]]);export{ve as P};
